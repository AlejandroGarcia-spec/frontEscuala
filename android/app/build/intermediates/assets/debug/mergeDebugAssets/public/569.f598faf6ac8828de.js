"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[569],{569:(I,u,c)=>{c.r(u),c.d(u,{QRAlumnoPageModule:()=>q});var C=c(2200),p=c(4341),d=c(9420),g=c(8132),f=c(467),n=c(3664),h=c(5933),y=c(345);const L=["qrcElement"];let R=(()=>{class a{constructor(e,t){this.renderer=e,this.sanitizer=t,this.allowEmptyString=!1,this.colorDark="#000000ff",this.colorLight="#ffffffff",this.cssClass="qrcode",this.elementType="canvas",this.errorCorrectionLevel="M",this.margin=4,this.qrdata="",this.scale=4,this.width=10,this.qrCodeURL=new n.bkB,this.context=null}ngOnChanges(){var e=this;return(0,f.A)(function*(){yield e.createQRCode()})()}isValidQrCodeText(e){return!1===this.allowEmptyString?!(typeof e>"u"||""===e||"null"===e||null===e):!(typeof e>"u")}toDataURL(e){return new Promise((t,o)=>{(0,h.dY)(this.qrdata,e,(i,s)=>{i?o(i):t(s)})})}toCanvas(e,t){return new Promise((o,i)=>{(0,h.mo)(e,this.qrdata,t,s=>{s?i(s):o("success")})})}toSVG(e){return new Promise((t,o)=>{(0,h.toString)(this.qrdata,e,(i,s)=>{i?o(i):t(s)})})}renderElement(e){for(const t of this.qrcElement.nativeElement.childNodes)this.renderer.removeChild(this.qrcElement.nativeElement,t);this.renderer.appendChild(this.qrcElement.nativeElement,e)}createQRCode(){var e=this;return(0,f.A)(function*(){e.version&&e.version>40?(console.warn("[angularx-qrcode] max value for `version` is 40"),e.version=40):e.version&&e.version<1?(console.warn("[angularx-qrcode]`min value for `version` is 1"),e.version=1):void 0!==e.version&&isNaN(e.version)&&(console.warn("[angularx-qrcode] version should be a number, defaulting to auto."),e.version=void 0);try{if(!e.isValidQrCodeText(e.qrdata))throw new Error("[angularx-qrcode] Field `qrdata` is empty, set 'allowEmptyString=\"true\"' to overwrite this behaviour.");e.isValidQrCodeText(e.qrdata)&&""===e.qrdata&&(e.qrdata=" ");const t={color:{dark:e.colorDark,light:e.colorLight},errorCorrectionLevel:e.errorCorrectionLevel,margin:e.margin,scale:e.scale,version:e.version,width:e.width},o=e.imageSrc,i=e.imageHeight||40,s=e.imageWidth||40;switch(e.elementType){case"canvas":{const r=e.renderer.createElement("canvas");e.context=r.getContext("2d"),e.toCanvas(r,t).then(()=>{if(e.ariaLabel&&e.renderer.setAttribute(r,"aria-label",`${e.ariaLabel}`),e.title&&e.renderer.setAttribute(r,"title",`${e.title}`),o&&e.context){e.centerImage=new Image(s,i),o!==e.centerImage.src&&(e.centerImage.crossOrigin="anonymous",e.centerImage.src=o),i!==e.centerImage.height&&(e.centerImage.height=i),s!==e.centerImage.width&&(e.centerImage.width=s);const l=e.centerImage;l&&(l.onload=()=>{e.context?.drawImage(l,r.width/2-s/2,r.height/2-i/2,s,i)})}e.renderElement(r),e.emitQRCodeURL(r)}).catch(l=>{console.error("[angularx-qrcode] canvas error:",l)});break}case"svg":{const r=e.renderer.createElement("div");e.toSVG(t).then(l=>{e.renderer.setProperty(r,"innerHTML",l);const m=r.firstChild;e.renderer.setAttribute(m,"height",`${e.width}`),e.renderer.setAttribute(m,"width",`${e.width}`),e.renderElement(m),e.emitQRCodeURL(m)}).catch(l=>{console.error("[angularx-qrcode] svg error:",l)});break}default:{const r=e.renderer.createElement("img");e.toDataURL(t).then(l=>{e.alt&&r.setAttribute("alt",e.alt),e.ariaLabel&&r.setAttribute("aria-label",e.ariaLabel),r.setAttribute("src",l),e.title&&r.setAttribute("title",e.title),e.renderElement(r),e.emitQRCodeURL(r)}).catch(l=>{console.error("[angularx-qrcode] img/url error:",l)})}}}catch(t){console.error("[angularx-qrcode] Error generating QR Code:",t.message)}})()}convertBase64ImageUrlToBlob(e){const t=e.split(";base64,"),o=t[0].split(":")[1],i=atob(t[1]),s=new Uint8Array(i.length);for(let r=0;r<i.length;++r)s[r]=i.charCodeAt(r);return new Blob([s],{type:o})}emitQRCodeURL(e){const t=e.constructor.name;if(t===SVGSVGElement.name){const m=new Blob([e.outerHTML],{type:"image/svg+xml"}),U=URL.createObjectURL(m),Q=this.sanitizer.bypassSecurityTrustUrl(U);return void this.qrCodeURL.emit(Q)}let o="";t===HTMLCanvasElement.name&&(o=e.toDataURL("image/png")),t===HTMLImageElement.name&&(o=e.src);const i=this.convertBase64ImageUrlToBlob(o),s=URL.createObjectURL(i),r=this.sanitizer.bypassSecurityTrustUrl(s);this.qrCodeURL.emit(r)}static#e=this.\u0275fac=function(t){return new(t||a)(n.rXU(n.sFG),n.rXU(y.up))};static#t=this.\u0275cmp=n.VBU({type:a,selectors:[["qrcode"]],viewQuery:function(t,o){if(1&t&&n.GBs(L,7),2&t){let i;n.mGM(i=n.lsd())&&(o.qrcElement=i.first)}},inputs:{allowEmptyString:"allowEmptyString",colorDark:"colorDark",colorLight:"colorLight",cssClass:"cssClass",elementType:"elementType",errorCorrectionLevel:"errorCorrectionLevel",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",margin:"margin",qrdata:"qrdata",scale:"scale",version:"version",width:"width",alt:"alt",ariaLabel:"ariaLabel",title:"title"},outputs:{qrCodeURL:"qrCodeURL"},features:[n.OA$],decls:2,vars:2,consts:[["qrcElement",""]],template:function(t,o){1&t&&n.Hgh(0,"div",null,0),2&t&&n.HbH(o.cssClass)},encapsulation:2,changeDetection:0})}return a})(),b=(()=>{class a{constructor(e){this.modalCtrl=e,this.datosQR=""}cerrarModal(){this.modalCtrl.dismiss()}ionViewWillEnter(){}static#e=this.\u0275fac=function(t){return new(t||a)(n.rXU(d.W3))};static#t=this.\u0275cmp=n.VBU({type:a,selectors:[["app-qralumno"]],inputs:{datosQR:"datosQR"},decls:7,vars:3,consts:[[1,"ion-padding"],[1,"qr-container"],[3,"qrdata","width","errorCorrectionLevel"]],template:function(t,o){1&t&&(n.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),n.EFF(3,"QR del Alumno"),n.k0s()()(),n.j41(4,"ion-content",0)(5,"div",1),n.nrm(6,"qrcode",2),n.k0s()()),2&t&&(n.R7$(6),n.Y8G("qrdata",o.datosQR)("width",256)("errorCorrectionLevel","M"))},dependencies:[d.bv,d.W9,d.eU,d.BC,d.ai,R],styles:[".qr-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100%}"]})}return a})();var v=c(2615);const w=[{path:"",component:b}];let E=(()=>{class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#t=this.\u0275mod=n.$C({type:a});static#r=this.\u0275inj=v.G2t({imports:[g.iI.forChild(w),g.iI]})}return a})(),q=(()=>{class a{static#e=this.\u0275fac=function(t){return new(t||a)};static#t=this.\u0275mod=n.$C({type:a});static#r=this.\u0275inj=v.G2t({imports:[C.MD,p.YN,d.bv,E]})}return a})()}}]);